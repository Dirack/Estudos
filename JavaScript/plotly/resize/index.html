<!doctype html>
<html>
<head>
	<meta charset="utf-8">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
	<style>
		#myDiv{
			width: 100%;
		}
	</style>
</head>
<body>
	<div id="myDiv"></div>
	<script>
		// Some info about viewport percentages:
		// http://stackoverflow.com/questions/1575141/make-div-100-height-of-browser-window

	async function graphic() {
		var d3 = Plotly.d3;

		var WIDTH_IN_PERCENT_OF_PARENT = 100,
		    HEIGHT_IN_PERCENT_OF_PARENT = 100;

		var gd3 = d3.select('#myDiv')
		    .append('div')
		    .style({
			width: WIDTH_IN_PERCENT_OF_PARENT + '%',
			'margin-left': (100 - WIDTH_IN_PERCENT_OF_PARENT) / 2 + '%',

			height: HEIGHT_IN_PERCENT_OF_PARENT + 'vh',
			'margin-top': (100 - HEIGHT_IN_PERCENT_OF_PARENT) / 2 + 'vh'
		    });

		var gd = gd3.node();

		var graph = Plotly.newPlot(gd, [{
		    type: 'bar',
		    x: [1, 2, 3, 4],
		    y: [5, 10, 2, 8],
		    marker: {
			color: '#C8A2C8',
			line: {
			    width: 2.5
			}
		    }
		}], {
		    title: 'Auto-Resize',
		    font: {
			size: 16
		    }
		}).then(g => {return g});

			window.addEventListener('resize', ()=>{
				Plotly.Plots.resize(gd);
			});

			console.log(gd.layout);

			return graph
		};

		let capa = graphic();
	</script>
</body>
</html>
